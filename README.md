# Python 音乐下载工具

这是一个基于命令行的音乐搜索和下载工具，利用网易云音乐 API。它支持交互式操作和命令式批量处理。

## 主要功能

- **交互式搜索**：在终端中直接搜索、翻页并选择歌曲进行下载。
- **命令式批量处理**：
  - `search` 命令：根据关键词或文件列表搜索歌曲，并将结果保存为播放列表文件（自动去重）。
  - `execute` 命令：读取播放列表文件，并批量下载其中的所有歌曲。
- **元数据嵌入**：下载完成后，自动将歌曲封面、歌词、标题、歌手和专辑信息嵌入到 `.mp3` 或 `.flac` 文件中。
- **美观的终端界面**：使用 `rich` 库提供清晰的表格、进度条和状态信息。
- **健壮性设计**：API 请求包含重试逻辑，提高了网络不稳定时的成功率。

## 安装与运行

1. **安装依赖**

   ```bash
   pip install requests rich mutagen
   ```

2. **运行模式**

   - **交互模式**：
     直接运行主程序，即可进入交互式界面。

     ```bash
     python main.py
     ```

     然后根据提示输入关键词搜索、翻页 (`n`/`p`)、选择序号下载。

   - **命令模式（批量下载）**：
     该模式分为两步：`search` (搜索) 和 `execute` (执行)。

     **第一步：搜索歌曲并生成播放列表**

     搜索单个歌曲：

     ```bash
     python main.py search "王力宏"
     ```

     从文件批量搜索 (文件中每行一个关键词):

     ```bash
     python main.py search --from-file my_song_list.txt
     ```

     这会在当前目录下生成一个 `playlist.jsonl` 文件，其中包含了所有搜索到的、去重后的歌曲信息。

     **第二步：执行下载**

     ```bash
     python main.py execute
     ```

     该命令会读取 `playlist.jsonl` 文件并下载所有歌曲。

