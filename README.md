# Python 音乐下载工具

这是一个基于命令行的交互式音乐搜索和下载工具。用户可以通过输入歌曲或歌手名来搜索音乐，并从结果中选择要下载的歌曲。下载的 MP3 文件会自动嵌入封面、歌词等元数据信息。

## 功能模块

本项目主要由以下几个核心功能模块组成：

1. **交互式命令行 (Interactive CLI)**
    * 使用 `rich` 库构建，提供美观、用户友好的命令行界面。
    * 支持彩色输出、表格展示和实时进度条。

2. **音乐搜索 (Music Search)**
    * 支持通过歌曲名或歌手名进行模糊搜索。
    * 实现了分页功能，可以浏览前后的搜索结果。

3. **音乐下载 (Music Download)**
    * 获取选定歌曲的下载链接。
    * 在下载过程中显示实时进度条，包括文件大小、下载速度和预计剩余时间。

4. **元数据写入 (Metadata Tagging)**
    * 下载完成后，使用 `mutagen` 库为 MP3 文件写入 ID3 标签。
    * 支持写入的信息包括：歌曲名、歌手、专辑、专辑封面和歌词。

5. **API 模块化 (Pluggable API)**
    * 将数据获取逻辑（如搜索、获取下载链接）与主程序分离。
    * 支持在真实的在线 API 和本地的假数据之间轻松切换，便于开发和测试。

## 开发阶段与目标

本项目的开发遵循了分阶段、迭代优化的方法，主要分为以下几个阶段：

### 阶段一：项目规划与初始化

* **目标**: 明确项目的核心需求，规划技术栈（Python, `requests`, `rich`, `mutagen`），并创建基础的项目结构。
* **产出**: `main.py` 初始框架, `requirements.txt` 依赖列表。

### 阶段二：核心功能实现 (基于真实 API)

* **目标**: 快速验证核心功能的可行性。直接对接一个公开的音乐 API (网易云音乐)，实现搜索、下载和元数据写入的完整流程。
* **产出**: 一个可以实际运行，但交互体验较为基础的原型版本。

### 阶段三：交互流程优化与解耦 (基于假数据)

* **目标**: 响应“优先完成交互流程”的开发策略，将项目的数据源从真实的在线 API 切换为本地的假数据 (`mock_data.py`)。
* **核心价值**:
  * **解耦**: 将 UI 交互逻辑与网络请求逻辑分离。
  * **效率**: 使得开发和测试无需依赖网络环境，可以快速地对搜索、翻页、选择、下载等交互流程进行迭代和优化。
* **产出**: 一个交互流畅、功能完整的模拟版本。

### 阶段四：最终整合与完善 (未来)

* **目标**: 在交互流程得到充分验证后，重新将数据源切换回真实的在线 API。
* **任务**:
  * 添加更全面的错误处理机制（如网络异常、API 返回错误等）。
  * 优化代码结构，提高代码的可读性和可维护性。
  * 考虑增加配置项，例如自定义下载路径等。
